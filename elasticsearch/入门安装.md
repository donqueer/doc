## 重要概念

**索引**：相当于mysql的库

**文档**：相当于mysql的表

**文档**：相当于mysql的行

![img](../imgs/1639147090121-628f7b87-e30a-4ec3-83fc-dccc35fb7ffa.png)



**倒排索引**：es会对存储的文档进行分词，分别记录每次词在哪些文档中出现过

![img](../imgs/1639147189898-d2f57bc1-1035-4bb2-90eb-653d355e7013.png)

**相关性得分**：

搜索“红海行动”

1. 把“红海行动”进行分词：红海、行动
2. 找到对应的文档（12345）

1. 评分：1>2>=3>4>5



## 安装

- 安装

```shell
docker pull elasticsearch:7.4.2
docker pull kibana:7.4.2
```

- 配置和数据挂载

```shell
mkdir -p /Users/eleme/mydata/elasticsearch/config
mkdir -p /Users/eleme/mydata/elasticsearch/data
```

- 修改配置：外部机器也能访问

```shell
echo "http.host: 0.0.0.0" >> /Users/eleme/mydata/elasticsearch/config/elasticsearch.yml
```

- 启动es

```shell
docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \
-e "discovery.type=single-node" \
-e ES_JAVA_OPTS="-Xms64m -Xmx128m" \
-v /Users/eleme/mydata/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \
-v /Users/eleme/mydata/elasticsearch/data:/usr/share/elasticsearch/data \
-v /Users/eleme/mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \
-d elasticsearch:7.4.2
```

- 访问

http://localhost:9200/

- 看日志

```shell
docker logs elasticsearch
```

- 启动kibana

```shell
docker run --name kibana -e ELASTICSEACH_URL=http://172.17.0.2:9200 -p 5601:5601 \
-d kibana:7.4.2
```

- 访问

http://localhost:5601/

找到启动kibana是的ELASTICSEACH_URL：

docker inspect elasticsearch |grep IPAddress

查看es的真实ip，然后填上去